<!DOCTYPE html>

{% extends "inventory_management_app/templates/inventory_management_app/inventory_management_app_base.html" %}

  {% block body_block %}

  <!-- <div class="row">
    <div id="extended_margin" class="col-lg-2">
    </div> -->

<div class="container">

  <div class="row">



    <div class="row">

      <div class="col-lg-2" >
        <div class="recent_queries">
        <h3>Recent queries</h3>
        {% for item in queries %}
        <a class="recent_queries_list" href="{% url 'inventory_management_app:search_results' %}?q={{item.query}}">"{{ item.query }}"</a>
        <br>
        {% endfor %}
        </div>
      </div>

        <div class="row">
          <div class="col-lg-2" >

                <div class="row">
                <div class="col-lg-2" >
                  <div class="dashboard_small_box">
                    <h3>Active Projects</h3>

                    <h2>{{ number_of_projects.count }}</h2>

                  </div>
                </div>
                </div>


                <div class="row">
                <div class="col-lg-2" >
                  <div class="dashboard_small_box">
                    <h3>Total Boxes</h3>
                    <h2> {{ box_data.count }} </h2>
                  </div>
                </div>
                </div>

              </div>
            </div>

        <div class="row">

          <div class="col-lg-2" >
            <div class="pie_chart">
          <script type="text/javascript">

          $(function () {
            var my_pie_chart = Highcharts.chart('pie_container', {
              chart: {
                type: 'pie',
                options3d: {
                  enabled: true,
                  alpha: 65
                }
                },
                title: {
                    text: 'Boxes per project'
                  },
                  plotOptions: {
                    pie: {
                      innerSize: 120,
                      depth: 15,
                    }

                  },
                  series: [{
                    name: 'Boxes Assigned',
                    data: [
                      {% for item in project_data %}

                      ['{{item.project_name}}', {{item.box_set.count}}],

                      {% endfor %}

                    ]
                  }]
                });
              });


                </script>



            <div id="pie_container" style="width:100%; height:45vh;">
            </div>
          </div>
          </div>

        </div>


    </div>






          <div class="row">



              <div class="col-md-5">

                <div class="dashboard_shelf_space_widget">

                <script type="text/javascript">




                </script>



                    <div id="shelf_space_container">
                    </div>




                  </div>
                  </div>

              </div>





              <div class="col-md-5">



                <script>

                $(document).ready(function(){
                        $('#asset_changes_table').find('tr:contains("Created")').css('background-color','#212B1E');
                        $('#asset_changes_table').find('tr:contains("Deleted")').css('background-color','#472727');
                        $('#asset_changes_table').find('tr:contains("Changed")').css('background-color','#4C462A');


                });


                </script>





                <div class="asset_changes_datatable">
                <div class="dtTwo">


                <table id="asset_changes_table">

                    <thead>
                        <tr>
                          <th>Project</th>
                          <th>Type</th>
                          <th>Box Contents</th>
                        </tr>
                    </thead>

                    <tbody>

                      {% for item in box_content_history %}


                        <tr>

                          <td>{{ item.project_assigned_to }}</td>
                          <td>{{ item.get_history_type_display }}</td>
                          <td>{{ item.box_contents }}</td>

                        </tr>

                        {% endfor %}


                    </tbody>

                </table>
              </div>











                    </div>
                    </div>




          </div>
      </div>


  </div>







  {% endblock %}
